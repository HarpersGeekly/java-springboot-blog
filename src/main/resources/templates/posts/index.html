<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="fragments/header :: my-header('Posts')">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>

    </script>
</head>
<body>
<nav th:include="fragments/navbar :: my-navbar"></nav>

    <div id="wrapper">

        <h2 id="postIntro">recent posts</h2>

        <div id="content" th:each="post : ${page}">
            <ul>
                <li>
                    <h4 th:text="${post.title}" class="postTitleIndexPage">
                        <!--<a th:href="@{/posts/{id}(id=${post.id})}"</a> -->
                    </h4>
                    <i class="fas fa-thumbs-up postUpVoteIconIndex"></i>
                    <h5 class="postVoteCountIndex" th:text="${post.voteCount()}"></h5>
                    <i class="fas fa-comments postCommentIconIndex"></i>
                    <h5 class="postCommentSizeIndex" th:text="${post.getComments().size()}"></h5>
                    <h5><a th:href="@{/profile/{id}(id=${post.user.id})}">
                        <span class="postedByNameTextIndex" th:text="${post.user.username}"></span></a>
                        <span class="postedByDateTime" th:text="${#temporals.format(post.date,  'h:mm a')}"></span>
                        <span class="postedByDate" th:text="${#temporals.monthNameShort(post.date)}"></span>
                        <span class="postedByDate" th:text="${#temporals.day(post.date)}"></span>
                        <span class="postedByDate" th:text="${#temporals.year(post.date)}"></span>
                    </h5>

                    <div class="gradientBox">
                        <p class="postDescription" th:text="${post.description}"></p>
                        <p class="read-more">
                            <i class="fas fa-hand-point-right fa-read-more"></i>
                            <a th:href="@{/posts/{id}(id=${post.id})}">check out the post...</a>
                        </p>
                    </div>
                        <!--<h5 id="createdDate">created: <span th:text="${#temporals.format(post.date, 'MM-dd-yyyy, h:mm a')}"></span></h5>-->
                </li>
                <!--// wanna use a button to send to edit here? -->
                    <!--<button> <a th:href="@{/posts/{id}/edit(id=${post.id})}"  th:text="${'Edit: ' + post.title}"></a></button>-->
            </ul>
        </div>

        <!--<!=================================== PAGINATION =========================================================-->
        <nav class="text-center">
            <ul class="pagination">

                <li th:class="${page.isFirst()}? 'disabled' : ''">
                    <span th:if='${page.isFirst()}'>← First</span>
                    <a th:if='${not page.isFirst()}' th:href="'?page=0'">
                        ← First
                    </a>
                </li>
                <li th:class="${page.hasPrevious()}? '' : 'disabled'">
                    <span th:if='${not page.hasPrevious()}'>«</span>
                    <a
                            th:if='${page.hasPrevious()}'
                            th:href="'?page=' + ${page.getNumber() - 1}"
                            title='Go to previous page'
                    >
                        «
                    </a>
                </li>
                <li th:each="i : ${#numbers.sequence(1, page.getTotalPages())}">
                <span
                        th:if='${(i - 1) == param.page}'
                        th:text='${i}'>
                    1
                </span>
                    <a
                            th:if='${not ((i - 1) == param.page)}'
                            th:href="'?page=' + ${(i -1)}"
                    >
                        <span th:text='${i}'>1</span>
                    </a>
                </li>
                <li th:class="${page.hasNext()} ? '' : 'disabled'">
                    <span th:if='${not page.hasNext()}'>»</span>
                    <a
                            th:if='${page.hasNext()}'
                            th:href="'?page=' + ${page.getNumber() + 1}"
                            title='Go to next page'
                    >
                        »
                    </a>
                </li>
                <li th:class="${page.isLast()}? 'disabled' : ''">
                    <span th:if='${page.isLast()}'>Last →</span>
                    <a
                            th:if='${not page.isLast()}'
                            th:href="'?page=' + ${page.getTotalPages() - 1}"
                    >
                        Last →
                    </a>
                </li>
            </ul>
        </nav>


    </div>

<footer th:include="fragments/footer :: my-footer"></footer>
<script>

    $(function(){ /* to make sure the script runs after page load */


//        var showChar = 100;
//        var ellipsestext = "...";
////        var moretext = "more";
////        var lesstext = "less";
//        $('.gradientBox').each(function() {
//            var content = $(this).html();
//
//            if(content.length > showChar) {
//
//                var c = content.substr(0, showChar);
//                var h = content.substr(showChar-1, content.length - showChar);
//
//                var html = c + '<span class="moreellipses">' + ellipsestext+ '&nbsp;</span>' +
//                    '<span>' + h +
//                    '</span>';
//
//                $(this).html(html);
//            }
//
//        });

//        $(".read-more").click(function(){
//            if($(this).hasClass("less")) {
//                $(this).removeClass("less");
//                $(this).html(moretext);
//            } else {
//                $(this).addClass("less");
//                $(this).html(lesstext);
//            }
//            $(this).parent().prev().toggle();
//            $(this).prev().toggle();
//            return false;
//        });


    });

</script>
</body>
</html>