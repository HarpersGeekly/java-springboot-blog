<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<body>
<th:block th:fragment="ajaxPosts">

    <div class="content" th:each="post : ${nextResultSet}">
            <!--<div class="postPicWrapper">-->
                <!--&lt;!&ndash;<span th:if="${post.user.profilePicture} == null">&ndash;&gt;-->
                <!--&lt;!&ndash;<img class="profilePicPostIndex" src="/../images/user.png"/>&ndash;&gt;-->
                <!--&lt;!&ndash;</span>&ndash;&gt;-->
                <!--&lt;!&ndash;<span th:if="${post.user.profilePicture} != null">&ndash;&gt;-->
                <!--&lt;!&ndash;<img class="profilePicPostIndex" th:src="@{'/uploads/' + ${post.user.profilePicture}}"/>&ndash;&gt;-->
                <!--&lt;!&ndash;</span>&ndash;&gt;-->
            <!--</div>-->

            <!--<div class="postInfoWrapper">-->

                <div class="secretAjaxClass">

                    <th:block th:fragment="post">
                        <header class="indent">
                            <a th:href="@{/posts/{id}/{title}(id=${post.id}, title=${post.makeSlug(post.title)})}">
                                <h1 th:utext="${post.htmlTitle}" class="postTitle"></h1>
                            </a>

                            <!--<div class="post-tags-div">-->
                                <!--<a class="post-tag" th:each="tag : ${post.getCategories()}" th:text="${tag.name}" th:href="@{/posts/search(term=${tag.name})}"></a>-->
                            <!--</div>-->

                            <div class="postedByWrapper">By: <a class="postedByNameTextIndex" th:href="@{/profile/{id}(id=${post.user.id})}">
                                <span th:text="${post.user.username}"></span></a>
                                <span class="postedByDateTime" th:text="${#temporals.format(post.date, 'h:mm a')}"></span>
                                <span class="postedByDate" th:text="${#temporals.monthNameShort(post.date)}"></span>
                                <span class="postedByDate" th:text="${#temporals.day(post.date)}"></span>
                                <span class="postedByDate" th:text="${#temporals.year(post.date)}"></span>
                            </div>
                            <div>
                                <i class="fas fa-thumbs-up postUpVoteIconIndex"></i>
                                <h5 class="postVoteCountIndex" th:text="${post.voteCount()}"></h5>
                                <i class="fas fa-comments postCommentIconIndex"></i>
                                <h5 class="postCommentSizeIndex" th:text="${post.getComments().size()}"></h5>
                                <i class="fas fa-eye postHitCountIconIndex"></i>
                                <h5 class="postHitCountSizeIndex" th:text="${post.hitCount != null} ? ${post.hitCount.postCount} : '0'"></h5>

                            </div>
                        </header>

                        <a th:href="@{/posts/{id}/{title}(id=${post.id}, title=${post.makeSlug(post.title)})}">
                            <div class="postDescription hidden">
                                <p th:utext="${post.htmlImage}"></p>
                            </div>
                        </a>

                        <div class="post-subtitle indent">
                            <p th:utext="${post.htmlSubtitle}"></p>
                        </div>





                        <div th:if="${isOwnProfile} or ${#authorization.expression('hasRole(''ROLE_ADMIN'')')}" style="display: flex;">
                            <i class="fas fa-ellipsis-h fa-lg comment-ellipsis dropdown-toggle"
                               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            </i>
                            <div class="dropdown-menu edit-delete-dropdown" aria-labelledby="dropdownMenu">
                                <div>
                                    <a class="dropdown-edit-btn"  th:href="${'/posts/' + post.id + '/edit'}">
                                        <i class="far fa-edit"></i> edit
                                    </a>
                                </div>
                                <div>
                                    <form th:action="@{'/posts/' + ${post.id} + '/delete'}" method="post" class="deleteCommentForm">
                                        <button class="dropdown-delete-btn" type="submit">
                                            <i class="fas fa-bomb"></i> delete
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <hr class="posts-hr"/>
                    </th:block>
            </div>
    </div>
</th:block>
</body>
</html>
